/* styles/globals.css */
/* Import a custom font like IBM Plex Mono */
/* @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap'); */

/* --- Tailwind Directives (Keep at the top) --- */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- Base Layer: Global styles and CSS Variable Definitions --- */
@layer base {
  /* --- CSS Variable Definitions --- */
  
  :root {
    /* --- Theme Variables (Matrix Theme Example) --- */
    --matrix: 143 50% 55%; /* Primary Green HSL Value */
    --matrix-light: 140 60% 60%; /* Lighter Green */
    --matrix-dark: 140 70% 20%; /* Darker Green */
    --matrix-bg: 0 0% 8%; /* Very Dark Background HSL Value */
    --matrix-panel: 0 0% 14%; /* Slightly Lighter Panel Background */
    --matrix-text: var(--matrix); /* Default text is primary green */
    --matrix-border-color: 140 60% 40%; /* Border color HSL Value */
    --matrix-muted-text: 140 40% 55%; /* Muted text HSL Value (adjusted contrast) */
    /* --- Font Definitions --- */
    @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap');
    --font-matrix: "IBM Plex Mono", monospace;
    --font-matrix: "Courier New", monospace;    /* Fallback Matrix font */
    /* --font-sans: "Inter", sans-serif; */     /* Define if using Inter or another sans-serif */

    /* --- Layout & Radius --- */
    --radius: 0.625rem;             /* Base border radius (approx 10px) */

    /* --- Shacdn-ui variable mapping --- */
    /* --- Shadcn Variable Mapping --- */
    /* Map standard Shadcn variable names to your theme variables */
    --background: var(--matrix-bg);                /* App background */
    --foreground: var(--matrix-text);              /* Default text color */
    --card: var(--matrix-panel);                   /* Card background */
    --card-foreground: var(--matrix-text);         /* Card text color */
    --popover: var(--matrix-panel);                /* Popover background */
    --popover-foreground: var(--matrix-text);      /* Popover text color */
    --primary: var(--matrix);                      /* Primary interactive color */
    --primary-foreground: var(--matrix-bg);        /* Text on primary bg (dark) */
    --secondary: var(--matrix-dark);               /* Secondary interactive color */
    --secondary-foreground: var(--matrix-light);   /* Text on secondary bg (light) */
    --muted: var(--matrix-dark);                   /* Muted background elements */
    --muted-foreground: var(--matrix-muted-text);  /* Muted text color */
    --accent: var(--matrix-dark);                  /* Accent elements (can be same as secondary) */
    --accent-foreground: var(--matrix-light);      /* Text on accent elements */
    --destructive: 0 84% 60%;                      /* Destructive actions (Standard Red HSL) */
    --destructive-foreground: 0 0% 98%;            /* Text on destructive bg (Light) */
    --border: var(--matrix-border-color);          /* Element borders */
    --input: var(--matrix-border-color);           /* Input borders */
    --ring: var(--matrix-light);                   /* Focus rings */
    --radius: var(--radius);                       /* Use base radius variable */
    
    /* --- Colors --- */
    --background-start: 0 0% 10%; /* Gradient start */
    --background-end: 0 0% 5%; /* Gradient end */
    --noise-opacity: 0.03; /* Noise opacity */
    --scanline-opacity: 0.04; /* Scanline opacity */
    --scanline-width: 0.5px; /* Scanline width */

    /* --- Transitions --- */
    --transition-duration: 0.2s;

    /* --- Shadows --- */
    --shadow-color: 0 0% 0%; /* Use black or dark gray */
    --shadow-intensity: 0.2; /* Adjust intensity of shadow */

  }

  /* Optional: Dark Mode Override (Define if implementing toggle) */
  /* .dark { */
  /*   --background: 0 0% 98%; */
  /*   --foreground: 0 0% 9%; */
  /*   --card: 0 0% 96%; */
  /*   --primary: ...; */
  /*   ... etc ... */
  /* } */

  /* --- Base Body Styles --- */
  body {
    /* Base background: subtle gradient */
    background-image:
      linear-gradient(to bottom,
          hsl(var(--background-start)),
          hsl(var(--background-end)));
    
    /* Noise effect overlay */
    &::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACVSURBVChTY2AYYNgLxIuJv+T/n4eBgSEAAAEcBA/x6c22AAAAAElFTkSuQmCC");
        background-repeat: repeat;
        opacity: var(--noise-opacity);
        pointer-events: none; /* Make the noise layer not interactable */
        z-index: 0;
    }

    /* Apply theme variables DIRECTLY, not using @apply for these */
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: var(--font-matrix);

    /* Standard Tailwind utilities that don't depend on custom theme vars are OK */
    @apply antialiased; /* Apply font smoothing */
    @apply text-sm;
    @apply font-light;
    @apply tracking-wider;
    @apply uppercase;
    /* Other base styles */
    min-height: 100vh;
    overflow-x: hidden; /* Prevent horizontal scroll */
  }

  /* --- Custom Scrollbars (Themed) --- */
  /* Webkit (Chrome, Safari, Edge) */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: hsl(var(--matrix-bg)); /* Match background */
  }
  ::-webkit-scrollbar-thumb {
    background: hsl(var(--matrix-dark)); /* Use dark matrix color */
    border-radius: 3px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--matrix-light)); /* Lighter on hover */
  }

  /* IE and older Edge */
  * {
    -ms-overflow-style: -ms-autohiding-scrollbar;
  }

  /* Hide scrollbars on mobile/touch devices while preserving functionality */
  @media (pointer: coarse) {
    ::-webkit-scrollbar {
      display: none;
    }
    * {
      -ms-overflow-style: none;
    }
  }
}

/* --- Components Layer: Custom reusable component classes --- */

@layer components {
  /* Custom Card Style with Glow Effect */
  .matrix-glow-card {
      @apply border overflow-hidden rounded-md; /* Apply base border and overflow utilities */
      /* Apply theme values directly using CSS variables */
      border-color: hsl(var(--border));
      background-color: hsl(var(--card));
      border-radius: var(--radius);
      box-shadow: 0 0 1px 1px hsla(var(--matrix-light), 0.2), /* Inner lighter glow */
        0 0 2px 1px hsla(var(--matrix), 0.2);
      @apply transition-all duration-200;       /* Smooth transition for hover */
  }
  .matrix-glow-card:hover {
      /* Enhance glow on hover */
      box-shadow:
      0 0 2px 2px hsla(var(--matrix-light), 0.3), /* Inner lighter glow */
      0 0 4px 1px hsla(var(--matrix), 0.2);
  }

  .matrix-card {
    background: rgb(0, 30, 0, .5);
    border: none;
    box-shadow: none;
  }

  /* Custom input and button styles */
  .matrix-input,
  .matrix-button {
    @apply border rounded-md px-3 py-1;
    border-color: hsl(var(--border));
    background-color: hsl(var(--input));
    color: hsl(var(--foreground));
    transition: background-color var(--transition-duration), border-color var(--transition-duration), box-shadow var(--transition-duration);
    box-shadow: 0 0 1px hsla(var(--matrix), 0.2);
    
    &:focus {
      outline: none;
      border-color: hsl(var(--primary));
      box-shadow: 0 0 3px hsla(var(--primary), 0.5);
    }

    &:hover {
        border-color: hsl(var(--matrix-light));
        box-shadow: 0 0 2px hsla(var(--matrix), 0.3);
    }

    &:disabled {
      background-color: hsl(var(--muted));
      border-color: hsl(var(--muted));
      color: hsl(var(--muted-foreground));
      cursor: not-allowed;
      box-shadow: none;
    }
    &::placeholder {
        color: hsl(var(--muted-foreground));
    }
  }

  .matrix-link {
      @apply text-primary transition-colors;

      &:hover {
          color: hsl(var(--matrix-light));
      }
  }

    /* Custom Scanlines Effect */
    .scanlines {
      &::after {
          content: "";
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: linear-gradient(
              to bottom,
              transparent 0%,
              hsla(var(--matrix), var(--scanline-opacity)) var(--scanline-width),
              transparent var(--scanline-width)
          );
          background-size: 100% 5px; /* Adjust spacing as needed */
          pointer-events: none; /* Prevent scanlines from capturing mouse events */
          z-index: 1; /* Ensure scanlines are on top of other content */
      }
  }

    /* Style for interactive buttons */
    .matrix-button {
      @apply text-white rounded-md shadow-sm border;
      background-color: hsl(var(--primary)); /* Solid primary background */
      border-color: hsl(var(--primary));
      padding: 0.5rem 1rem; /* Adjust padding as needed */
      transition: background-color var(--transition-duration), border-color var(--transition-duration); /* Smooth transitions */

      &:hover {
          background-color: hsl(var(--matrix-light)); /* Lighter on hover */
          border-color: hsl(var(--matrix-light));
      }

      &:active {
          background-color: hsl(var(--matrix-dark)); /* Darker on active */
          border-color: hsl(var(--matrix-dark));
      }
    }
    
  /* --- Progress Bar Styles --- */
  .matrix-progress-bar {
    width: 100%;
    height: 1rem;
    background-color: hsl(var(--matrix-panel));
    border-radius: 0.375rem;
    overflow: hidden;
  }

  .matrix-progress-bar__fill {
    height: 100%;
    background-color: hsl(var(--matrix));
    transition: width 0.3s ease-in-out;
    width: var(--progress-width, 0%);
  }

  /* Custom Map Grid Background */
  .map-grid {
      /* Create grid lines using linear gradients */
      background-image:
          linear-gradient(hsla(var(--matrix), 0.08) 1px, transparent 1px), /* Horizontal lines */
          linear-gradient(90deg, hsla(var(--matrix), 0.08) 1px, transparent 1px); /* Vertical lines */
      /* Grid size (adjust performance if needed: 50px 50px) */
      background-size: 25px 25px;
      @apply border; /* Apply base border utility */
      /* Apply theme border color and radius directly */
      border-color: hsl(var(--border));
      border-radius: var(--radius);
  }

  /* --- Matrix Card Component Styles --- */
  .matrix-card {
    background-color: var(--matrix-panel);
    border: 1px solid var(--matrix-border-color);
    transition: transform 0.2s ease;
    border-radius: 0.5rem;
    padding: 1.5rem;
  }

  .matrix-card--hover {
    transform: translateY(-1px);
  }

  .matrix-card--default {
    transform: translateY(0);
  }

  .matrix-card__title,
  .matrix-card__icon {
    color: var(--matrix-card-color, var(--matrix-text));
  }

  .matrix-card__content {
    color: var(--matrix-muted-text);
  }

  /* --- Matrix Card Color Variants --- */
  .matrix-card[data-color-override] {
    --matrix-card-color: var(--color-override);
  }

  /* --- Progress Bar Progress States --- */
  .matrix-progress-bar__fill[data-progress] {
    --progress-width: var(--progress-value);
  }
}

/* NOTE: No redundant @tailwind utilities; directive at the end */